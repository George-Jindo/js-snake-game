<!DOCTYPE html>
<html>
<head>
    <title>Play The Retro Snake Game!</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

    <div id="topTitleBar">

        <h1 id="topTitleText">Play The Retro Snake Game!</h1>

    </div>


    <div id="instructions">
    
        <p><b>How to Play:</b><br />Use the Arrow keys on your keyboard to move the snake Up, Down, Left or Right. The Goal is to eat as many apples without hitting the walls or your own body. <br />Good luck!</p>
    
    </div>

    <canvas id="gameCanvas" width="650" height="650"></canvas>


    <script>
        //sets the starting pixel for the snake & food
        let pixel = 15;
        

        //creates snake array
        let snake = [];
        snake[0] = {
            x: 15 * pixel,
            y: 16 * pixel
        }

        //next line allows the apple to be placed randomly on the canvas
        let apple = {
            x: Math.floor(Math.random() * 40) * pixel,
            y: Math.floor(Math.random() * 33 + 3.66) * pixel
        }

        //sets and creates the score variable
        let score = 0;
        let scoreText = "Score: ";
     

        let snakeDirection;

        document.addEventListener('keydown', direction);

        //Creates function for snake movemenet with arrow keys
        function direction(event) {
            let key = event.keyCode;
            if (key == 37 && snakeDirection != "RIGHT") {
                snakeDirection = "LEFT";
            }
            else if (key == 38 && snakeDirection != "DOWN") {
                snakeDirection = "UP";
            }
            else if (key == 39 && snakeDirection != "LEFT") {
                snakeDirection = "RIGHT";
            }
            else if (key == 40 && snakeDirection != "UP") {
                snakeDirection = "DOWN";
            }
        }
        
        function drawEverything() {
            const ctx = document.getElementById("gameCanvas").getContext('2d');            
            
            ctx.fillStyle = "#2a2a2a";
            ctx.fillRect(0, 50, gameCanvas.width, gameCanvas.height);
            ctx.strokeStyle = "white";
            ctx.strokeRect(0, 50, gameCanvas.width, gameCanvas.height);

            //draws snake
            for (let i = 0; i < snake.length; i++) {
                ctx.fillStyle = (i == 0) ? "red" : "white";
                ctx.fillRect(snake[i].x, snake[i].y +4.66, pixel, pixel);

                ctx.strokeStyle = (i ==0) ? "white" : "black";
                ctx.strokeRect(snake[i].x, snake[i].y +4.66, pixel, pixel);
            }

            //draws apple
            ctx.fillStyle = 'green';
            ctx.beginPath();
            ctx.arc(apple.x +7.5, apple.y +11, 5, 0, Math.PI * 2, true);
            ctx.fill();

            //old snake head
            let snakeX = snake[0].x;
            let snakeY = snake[0].y;


            //moves snake according to which direction the user initiates
            if (snakeDirection == "LEFT") snakeX -= pixel;
            if (snakeDirection == "UP") snakeY -= pixel;
            if (snakeDirection == "RIGHT") snakeX += pixel;
            if (snakeDirection == "DOWN") snakeY += pixel;

            if (snakeX == apple.x && snakeY == apple.y) {
                score++;
                apple = {
                    x: Math.floor(Math.random() * 40) * pixel,
                    y: Math.floor(Math.random() * 33 + 3.66) * pixel
                }
            } else {
                //remove the tail
                snake.pop();
            }

            //new head creation
            let newHead = {
                x: snakeX,
                y: snakeY
            }

            //creates the new head
            snake.unshift(newHead);

            //draws score
                ctx.fillStyle = "green";
                ctx.font = "30px arial";
                ctx.fillText(scoreText + score, 3 * pixel, 2.3 * pixel);
                        
        }

        //calls draw function
        let framesPerSecond = 30;
        let game = setInterval(drawEverything, 1500 / framesPerSecond);


    </script>

</body>
</html>
